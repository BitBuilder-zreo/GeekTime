<div id="app"><div class="_3ADRghFH_0" style="background-color: rgb(255, 255, 255);"><div class="gpDqvVI7_0" style="background-color: rgb(255, 255, 255);"></div> <div class="_20-cXID6_0" style="opacity: 1;"><div class="_3O_7qs2p_0 _2q1SuvsS_0"><div><div class="C3Euvro5_0"></div> <div class="_1mmSdAtq_0 _3J4dp-oG_0"><div class="Qmt5mthp_0"><i></i> <h2>极客时间<br><span>新用户注册即得30元礼券</span></h2></div> <a href="geektime://time.geekbang.org:80/main?views%2Fcolumn%2Farticle.js%3Fid%3D88573">打开APP</a></div></div> <!----> <div class="_3HCtER94_0"><div class="XPK3khh7_0"><i class="iconfont u9KJ6z9x_0"></i><span>iOS开发高手课</span></div> <div class="S8msnNlD_0"><span>首页</span><span class="_3FTQNYev_0">|</span><span class="iconfont"></span></div></div> <div class="_50pDbNcP_0"><h1 class="vJXgmLTi_0 _2QmGFWqF_0">
        10 | 包大小：如何从资源和代码层面实现全方位瘦身？
      </h1> <div class="_2LbT9q3y_0 _2QmGFWqF_0"><span>2019-04-02</span> <span>戴铭</span></div> <div class="_3Jbcj4Iu_0 _2QmGFWqF_0"><img src="https://static001.geekbang.org/resource/image/a6/9e/a6221d70185940229a0a0e573e96739e.jpg" class="_1-ZfmNK8_0"> <div class="_2SACi4xg_0"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAABCAYAAABOgffqAAAAJklEQVQYV2N89+7dfwYoEBQUBLPev3/PgMzGJk+OHkJm4rIflzgAI0Eny5z/mK0AAAAASUVORK5CYII="><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAABCAYAAADTjP5iAAAAH0lEQVQYV2N89+7df0FBQQYQeP/+PQMuNlgBAwNOeQDwaRLLLHSzZwAAAABJRU5ErkJggg=="><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAABCAYAAACCGM0BAAAAKElEQVQYV2N89+7df0FBQQYQeP/+PQMyGyzIwIAiRk15QmYRsp8c/QBc2zDL8BiueQAAAABJRU5ErkJggg=="><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAABCAYAAAAFKSQHAAAAGUlEQVQYV2N89+7df0FBQQYQeP/+PQMxbADB5g/LSUMg6QAAAABJRU5ErkJggg=="></div> <!----> <div class="_1Bg5E78Y_0 _25ls2Q2l_0"><div class="_1qj_iPD7_0"><h3>讲述：冯永吉</h3> <p><span style="margin-right: 3px;">时长</span><span style="margin-right: 10px;">22:30</span><span style="margin-right: 3px;">大小</span><span>20.61M</span></p></div> <!----> <div class="_2Ha38TVL_0 MH1rcCm7_0"><div class="_1iA2uC1V_0" style="background-image: url(&quot;https://static001.geekbang.org/resource/image/a6/9e/a6221d70185940229a0a0e573e96739e.jpg&quot;);"></div> <div class="_1iA2uC1V_0 _1WF5YSBJ_0"></div> <div class="iconfont _2Kms_g0F_0"></div></div> <audio title="10 | 包大小：如何从资源和代码层面实现全方位瘦身？" src="https://res001.geekbang.org//media/audio/bf/d7/bfafe4a0b0b7511e9532521c99e143d7/ld/ld.m3u8"></audio></div> <div class="_3IatBmhv_0"><div class="_29HP61GA_0"><p>你好，我是戴铭。今天我来跟你说下如何对 App 包大小做优化。</p><p>对 App 包大小做优化的目的，就是节省用户流量，提高用户下载速度。当初，我在主持滴滴客户端的瘦身时，就是奔着对包大小进行最大化优化的目标，3 个月内将包大小从 106MB 降到了最低 64MB，半年内稳定在了 70MB。当时业务还没有停，从 106MB 降到 64MB 的这 3 个月里如履薄冰，不同团队各显神威，几乎用到了所有手段，也做了很多创新，最终达成了目标。</p><p><img src="https://static001.geekbang.org/resource/image/f6/a2/f6764743beca921cb5dac4644ca092a2.png" alt=""></p><center><span class="reference">图 1 瘦身背景</span></center><p>上图就是当时主流 App 的大小，可以看到最大的百度和淘宝，分别是 131MB 和 115MB，滴滴是 106MB，最小的是微信 87MB。</p><p><img src="https://static001.geekbang.org/resource/image/7b/ea/7b7cc940287d2bbb98b97bce38f5aaea.png" alt=""></p><center><span class="reference">图 2 主流 App 安装包半年内的大小变化</span></center><p>可以看到，经过半年的时间，除了滴滴外每个 App 的安装包都增大了不少，先前最小的微信也从 87MB 增加到了 116MB。</p><p>相信你的团队也曾遇到过或正在经历着对包大小进行优化的任务，特别是 App Store 规定了安装包大小超过 150MB 的 App 不能使用 OTA（over-the-air）环境下载，也就是只能在 WiFi 环境下下载。所以，150MB 就成了 App 的生死线，一旦超越了这条线就很有可能会失去大量用户。</p><p>如果你的 App 要再兼容 iOS7 和 iOS8 的话，苹果<a href="https://help.apple.com/app-store-connect/#/dev611e0a21f">官方还规定</a>主二进制 text 段的大小不能超过 60MB。如果没有达到这个标准，你甚至都没法提交 App Store。</p><!-- [[[read_end]]] --><p>而实际情况是，业务复杂的 App 轻轻松松就超过了 60MB。虽然我们可以通过静态库转动态库的方式来快速避免这个限制，但是静态库转动态库后，动态库的大小差不多会增加一倍，这样 150MB 的限制就更难守住。</p><p>另外，App 包体积过大，对用户更新升级率也会有很大影响。</p><p>综上所述，App 包过大既损害用户体验，影响升级率，还会导致无法提交 App Store 的情况和非 WiFi 环境无法下载这样可能影响到 App 生死的问题。那么，怎样对包大小进行瘦身和控制包大小的不合理增长就成了重中之重。</p><p>接下来，我就把我用过的包大小瘦身方法一个个地都说给你听。</p><h2>官方 App Thinning</h2><p>App Thinning 是由苹果公司推出的一项可以改善 App 下载进程的新技术，主要是为了解决用户下载 App 耗费过高流量的问题，同时还可以节省用户 iOS 设备的存储空间。</p><p>现在的 iOS 设备屏幕尺寸、分辨率越来越多样化，这样也就需要更多资源来匹配不同的尺寸和分辨率。 同时，App 也会有 32 位、64 位不同芯片架构的优化版本。如果这些都在一个包里，那么用户下载包的大小势必就会变大。</p><p>App Thinning 会专门针对不同的设备来选择只适用于当前设备的内容以供下载。比如，iPhone 6 只会下载 2x 分辨率的图片资源，iPhone 6plus 则只会下载 3x 分辨率的图片资源。</p><p>在苹果公司使用 App Thinning 之前， 每个 App 包会包含多个芯片的指令集架构文件。以 Reveal.framework 为例，使用 du 命令查看到主文件在 Reveal.framework/Versions/A 目录下，大小有 21MB。</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">ming$ du -h Reveal.framework/*</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">  0B  Reveal.framework/Headers</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">  0B  Reveal.framework/Reveal</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> 16K  Reveal.framework/Versions/A/Headers</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> 21M  Reveal.framework/Versions/A</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> 21M  Reveal.framework/Versions</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>然后，我们可以再使用 file 命令，查看 Version 目录下的 Reveal 文件：</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">ming$ file Reveal.framework/Versions/A/Reveal </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">Reveal.framework/Versions/A/Reveal: Mach-O universal binary with 5 architectures: [i386:current ar archive] [arm64]</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">Reveal.framework/Versions/A/Reveal (for architecture i386): current ar archive</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">Reveal.framework/Versions/A/Reveal (for architecture armv7):  current ar archive</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">Reveal.framework/Versions/A/Reveal (for architecture armv7s): current ar archive</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">Reveal.framework/Versions/A/Reveal (for architecture x86_64): current ar archive</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">Reveal.framework/Versions/A/Reveal (for architecture arm64):  current ar archive</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>可以看到， Reveal 文件里还有 5 个文件：</p><ul>
<li>x86_64 和 i386，是用于模拟器的芯片指令集架构文件；</li>
<li>arm64、armv7、armv7s ，是真机的芯片指令集架构文件。</li>
</ul><p>下图来自<a href="http://iossupportmatrix.com/">iOS Support Matrix</a>，列出来的是历来各个 iOS 设备的指令集详细矩阵分布。从中，我们可以一窥所有设备的芯片指令集以及支持的最高和最低 iOS 版本。</p><p><img src="https://static001.geekbang.org/resource/image/47/6b/4746f231258fb5875f72fa594463216b.png" alt=""></p><center><span class="reference">图 3 各个 iOS 设备的指令集详细矩阵分布</span></center><p>使用 App Thinning 后，用户下载时就只会下载一个适合自己设备的芯片指令集架构文件。</p><p>App Thinning 有三种方式，包括：App Slicing、Bitcode、On-Demand Resources。</p><ul>
<li>App Slicing，会在你向 iTunes Connect 上传 App 后，对 App 做切割，创建不同的变体，这样就可以适用到不同的设备。</li>
<li>On-Demand Resources，主要是为游戏多关卡场景服务的。它会根据用户的关卡进度下载随后几个关卡的资源，并且已经过关的资源也会被删掉，这样就可以减少初装 App 的包大小。</li>
<li>Bitcode ，是针对特定设备进行包大小优化，优化不明显。</li>
</ul><p>那么，如何在你项目里使用 App Thinning 呢？</p><p>其实，这里的大部分工作都是由 Xcode 和 App Store 来帮你完成的，你只需要通过 Xcode 添加 xcassets 目录，然后将图片添加进来即可。</p><p>首先，新建一个文件选择 Asset Catalog 模板，如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/1e/27/1e0b0d270236842f0f1166e107965927.png" alt=""></p><center><span class="reference">图 4 选择使用 Asset Catalog 模板</span></center><p>然后，按照 Asset Catalog 的模板添加图片资源即可，添加的 2x 分辨率的图片和 3x 分辨率的图片，会在上传到 App Store 后被创建成不同的变体以减小 App 安装包的大小。而芯片指令集架构文件只需要按照默认的设置， App Store 就会根据设备创建不同的变体，每个变体里只有当前设备需要的那个芯片指令集架构文件。</p><p>使用 App Thining 后，你可以将 2x 图和 3x 图区分开，从而达到减小 App 安装包体积的目的。如果我们要进一步减小 App 包体积的话，还需要在图片和代码上继续做优化。接下来，我就跟你说说，为了减小 App 安装包的体积，我们还能在图片上做些什么？</p><h2>无用图片资源</h2><p>图片资源的优化空间，主要体现在删除无用图片和图片资源压缩这两方面。而删除无用图片，又是其中最容易、最应该先做的。像代码瘦身这样难啃的骨头，我们就留在后面吧。那么，我们是如何找到并删除这些无用图片资源的呢？</p><p>删除无用图片的过程，可以概括为下面这 6 大步。</p><ol>
<li>
<p>通过 find 命令获取 App 安装包中的所有资源文件，比如 find /Users/daiming/Project/ -name。</p>
</li>
<li>
<p>设置用到的资源的类型，比如 jpg、gif、png、webp。</p>
</li>
<li>
<p>使用正则匹配在源码中找出使用到的资源名，比如 pattern = @"@"(.+?)""。</p>
</li>
<li>
<p>使用 find 命令找到的所有资源文件，再去掉代码中使用到的资源文件，剩下的就是无用资源了。</p>
</li>
<li>
<p>对于按照规则设置的资源名，我们需要在匹配使用资源的正则表达式里添加相应的规则，比如 @“image_%d”。</p>
</li>
<li>
<p>确认无用资源后，就可以对这些无用资源执行删除操作了。这个删除操作，你可以使用 NSFileManger 系统类提供的功能来完成。</p>
</li>
</ol><p>整个过程如下图：</p><p><img src="https://static001.geekbang.org/resource/image/40/fc/400835aa1573a15ed4dcbf678bad82fc.png" alt=""></p><center><span class="reference">图 5 删除无用图片资源的过程</span></center><p>如果你不想自己重新写一个工具的话，可以选择开源的工具直接使用。我觉得目前最好用的是 <a href="https://github.com/tinymind/LSUnusedResources">LSUnusedResources</a>，特别是对于使用编号规则的图片来说，可以通过直接添加规则来处理。使用方式也很简单，你可以参看下面的动画演示：</p><p><img src="https://static001.geekbang.org/resource/image/4c/ee/4c0c466cc77f66b14547aaa50bff66ee.gif" alt=""></p><center><span class="reference">图 6 LSUnusedResources 使用示例</span></center><h2>图片资源压缩</h2><p>无用图片资源处理完了，那么有用的图片还有瘦身的空间吗？</p><p>答案是有的。</p><p>对于 App 来说，图片资源总会在安装包里占个大头儿。对它们最好的处理，就是在不损失图片质量的前提下尽可能地作压缩。目前比较好的压缩方案是，将图片转成 WebP。<a href="https://developers.google.com/speed/webp/">WebP</a> 是 Google 公司的一个开源项目。</p><p>首先，我们一起看看<strong>选择 WebP 的理由</strong>：</p><ul>
<li>WebP 压缩率高，而且肉眼看不出差异，同时支持有损和无损两种压缩模式。比如，将 Gif 图转为 Animated WebP ，有损压缩模式下可减少 64% 大小，无损压缩模式下可减少 19% 大小。</li>
<li>WebP 支持 Alpha 透明和 24-bit 颜色数，不会像 PNG8 那样因为色彩不够而出现毛边。</li>
</ul><p>接下来，我们再看看<strong>怎么把图片转成 WebP</strong>？</p><p>Google 公司在开源 WebP 的同时，还提供了一个图片压缩工具 <a href="https://developers.google.com/speed/webp/docs/precompiled">cwebp</a>来将其他图片转成 WebP。cwebp 使用起来也很简单，只要根据图片情况设置好参数就行。</p><p>cwebp 语法如下：</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">cwebp [options] input_file -o output_file.webp</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>比如，你要选择无损压缩模式的话，可以使用如下所示的命令：</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">cwebp -lossless original.png -o new.webp</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>其中，-lossless 表示的是，要对输入的 png 图像进行无损编码，转成 WebP 图片。不使用 -lossless ，则表示有损压缩。</p><p>在 cwebp 语法中，还有一个比较关键的参数 -q float。</p><p>图片色值在不同情况下，可以选择用 -q 参数来进行设置，在不损失图片质量情况下进行最大化压缩：</p><ul>
<li>小于 256 色适合无损压缩，压缩率高，参数使用 -lossless -q 100；</li>
<li>大于 256 色使用 75% 有损压缩，参数使用 -q 75；</li>
<li>远大于 256 色使用 75% 以下压缩率，参数 -q 50 -m 6。</li>
</ul><p>除了 cwebp 工具外，你还可以选择由腾讯公司开发的<a href="http://isparta.github.io">iSparta</a>。iSpart 是一个 GUI 工具，操作方便快捷，可以实现 PNG 格式转 WebP，同时提供批量处理和记录操作配置的功能。如果是其他格式的图片要转成 WebP 格式的话，需要先将其转成 PNG 格式，再转成 WebP 格式。它的 GUI 界面如下图：</p><p><img src="https://static001.geekbang.org/resource/image/89/45/89d5abb7fdb69a391b75eeba141ecc45.png" alt=""></p><center><span class="reference">图 7 iSparta 将 PNG 转 WebP 使用示例</span></center><p>图片压缩完了并不是结束，我们还需要在显示图片时使用 libwebp 进行解析。这里有一个 iOS 工程使用 libwebp 的范例，你可以点击<a href="https://github.com/carsonmcdonald/WebP-iOS-example">这个链接</a>查看。</p><p>不过，WebP 在 CPU 消耗和解码时间上会比 PNG 高两倍。所以，我们有时候还需要在性能和体积上做取舍。</p><p><strong>我的建议是，如果图片大小超过了 100KB，你可以考虑使用 WebP；而小于 100KB 时，你可以使用网页工具 <a href="https://tinypng.com/">TinyPng</a>或者 GUI 工具<a href="https://imageoptim.com/mac">ImageOptim</a>进行图片压缩</strong>。这两个工具的压缩率没有 WebP 那么高，不会改变图片压缩方式，所以解析时对性能损耗也不会增加。</p><h2>代码瘦身</h2><p>App 的安装包主要是由资源和可执行文件组成的，所以我们在掌握了对图片资源的处理方式后，需要再一起来看看对可执行文件的瘦身方法。</p><p>可执行文件就是 Mach-O 文件，其大小是由代码量决定的。通常情况下，<strong>对可执行文件进行瘦身，就是找到并删除无用代码的过程。</strong>而查找无用代码时，我们可以按照找无用图片的思路，即：</p><ul>
<li>首先，找出方法和类的全集；</li>
<li>然后，找到使用过的方法和类；</li>
<li>接下来，取二者的差集得到无用代码；</li>
<li>最后，由人工确认无用代码可删除后，进行删除即可。</li>
</ul><p>接下来，我们就看看具体的代码瘦身方法吧。</p><h3>LinkMap 结合 Mach-O 找无用代码</h3><p>我先和你说下怎么快速找到方法和类的全集。</p><p><strong>我们可以通过分析 LinkMap 来获得所有的代码类和方法的信息。</strong>获取 LinkMap 可以通过将 Build Setting 里的 Write Link Map File 设置为 Yes，然后指定 Path to Link Map File 的路径就可以得到每次编译后的 LinkMap 文件了。设置选项如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/66/2e/660aebe887ebd20f1b18fc685920b82e.png" alt=""></p><center><span class="reference">图 8 LinkMap 文件获取方法</span></center><p>LinkMap 文件分为三部分：Object File、Section 和 Symbols。如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/21/07/21cf3a872d3693b1978601b7aa033607.png" alt=""></p><center><span class="reference">图 9 LinkMap 文件主要组成</span></center><p>其中：</p><ul>
<li>Object File 包含了代码工程的所有文件；</li>
<li>Section 描述了代码段在生成的 Mach-O 里的偏移位置和大小；</li>
<li>Symbols 会列出每个方法、类、block，以及它们的大小。</li>
</ul><p>通过 LinkMap ，你不光可以统计出所有的方法和类，还能够清晰地看到代码所占包大小的具体分布，进而有针对性地进行代码优化。</p><p>得到了代码的全集信息以后，我们还需要找到已使用的方法和类，这样才能获取到差集，找出无用代码。所以接下来，我就先和你说说<strong>怎么通过 Mach-O 取到使用过的方法和类</strong>。</p><p>我在第 2 篇文章“<a href="https://time.geekbang.org/column/article/85331">APP 启动速度怎么做优化与监控？</a>”中，和你提到过 iOS 的方法都会通过 objc_msgSend 来调用。而，objc_msgSend 在 Mach-O 文件里是通过 __objc_selrefs 这个 section 来获取 selector 这个参数的。</p><p>所以，__objc_selrefs 里的方法一定是被调用了的。__objc_classrefs 里是被调用过的类，__objc_superrefs 是调用过 super 的类。通过 __objc_classrefs 和 __objc_superrefs，我们就可以找出使用过的类和子类。</p><p>那么，Mach-O 文件的 __objc_selrefs、__objc_classrefs 和 __objc_superrefs 怎么查看呢？</p><p>我们可以使用 <a href="https://sourceforge.net/projects/machoview/">MachOView 这个软件</a>来查看 Mach-O 文件里的信息。MachOView 同时也是一款开源软件，如果你对源码感兴趣的话，可以点击<a href="https://github.com/gdbinit/MachOView">这个地址</a>查看。</p><p>具体的查看方法，我将通过一个案例和你展开。</p><ul>
<li>首先，我们需要编译一个 App。在这里，我 clone 了<a href="https://github.com/ming1016/GCDFetchFeed">一个 GitHub 上的示例</a> 下来编译。</li>
<li>然后，将生成的 GCDFetchFeed.app 包解开，取出 GCDFetchFeed。</li>
<li>最后，我们就可以使用 MachOView 来查看 Mach-O 里的信息了。</li>
</ul><p><img src="https://static001.geekbang.org/resource/image/0b/a4/0bc5431e0cd634296886ac457d4066a4.jpg" alt=""></p><center><span class="reference">图 10 使用 MachOView 查看 GCDFetchFeed</span></center><p>如图上所示，我们可以看到 __objc_selrefs、__objc_classrefs 和、__objc_superrefs 这三个 section。</p><p>但是，这种查看方法并不是完美的，还会有些问题。原因在于， Objective-C 是门动态语言，方法调用可以写成在运行时动态调用，这样就无法收集全所有调用的方法和类。所以，我们通过这种方法找出的无用方法和类就只能作为参考，还需要二次确认。</p><h3>通过 AppCode 找出无用代码</h3><p>那么，有什么好的工具能够找出无用的代码吗？</p><p>我用过不少工具，但效果其实都不是很好，都卡在了各种运用运行时调用方法的写法上。即使是大名鼎鼎的 AppCode 在这方面也做得不是很好，当代码量过百万行时 AppCode 的静态分析会“歇菜”。</p><p>但是，<strong>如果工程量不是很大的话，我还是建议你直接使用 AppCode 来做分析。</strong>毕竟代码量达到百万行的工程并不多。而，那些代码量达到百万行的团队，则会自己通过 Clang 静态分析来开发工具，去检查无用的方法和类。</p><p>用 AppCode 做分析的方法很简单，直接在 AppCode 里选择 Code-&gt;Inspect Code 就可以进行静态分析。</p><p><img src="https://static001.geekbang.org/resource/image/a9/11/a935117790e7744069cf1bf58336b711.png" alt=""></p><center><span class="reference">图 11 使用 AppCode 来做静态分析</span></center><p>静态分析完以后，我们可以在 Unused code 里看到所有的无用代码，如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/57/a4/57a96abafd30d5c15210300c2d1eaba4.png" alt=""></p><center><span class="reference">图 12 Unused code 里看到所有无用代码</span></center><p>接下来，我和你说一下这些无用代码的主要类型。</p><ul>
<li>无用类：Unused class 是无用类，Unused import statement 是无用类引入声明，Unused property 是无用的属性；</li>
<li>无用方法：Unused method 是无用的方法，Unused parameter 是无用参数，Unused instance variable 是无用的实例变量，Unused local variable 是无用的局部变量，Unused value 是无用的值；</li>
<li>无用宏：Unused macro 是无用的宏。</li>
<li>无用全局：Unused global declaration 是无用全局声明。</li>
</ul><p>看似 AppCode 已经把所有工作都完成了，其实不然。下面，我再和你列举下 AppCode 静态检查的问题：</p><ul>
<li>JSONModel 里定义了未使用的协议会被判定为无用协议；</li>
<li>如果子类使用了父类的方法，父类的这个方法不会被认为使用了；</li>
<li>通过点的方式使用属性，该属性会被认为没有使用；</li>
<li>使用 performSelector 方式调用的方法也检查不出来，比如 self performSelector:@selector(arrivalRefreshTime)；</li>
<li>运行时声明类的情况检查不出来。比如通过 NSClassFromString 方式调用的类会被查出为没有使用的类，比如 layerClass = NSClassFromString(@“SMFloatLayer”)。还有以 [[self class] accessToken] 这样不指定类名的方式使用的类，会被认为该类没有被使用。像 UITableView 的自定义的 Cell 使用 registerClass，这样的情况也会认为这个 Cell 没有被使用。</li>
</ul><p>基于以上种种原因，使用 AppCode 检查出来的无用代码，还需要人工二次确认才能够安全删除掉。</p><h3>运行时检查类是否真正被使用过</h3><p>即使你使用 LinkMap 结合 Mach-O 或者 AppCode 的方式，通过静态检查已经找到并删除了无用的代码，那么就能说包里完全没有无用的代码了吗？</p><p>实际上，在 App 的不断迭代过程中，新人不断接手、业务功能需求不断替换，会留下很多无用代码。这些代码在执行静态检查时会被用到，但是线上可能连这些老功能的入口都没有了，更是没有机会被用户用到。也就是说，这些无用功能相关的代码也是可以删除的。</p><p>那么，<strong>我们要怎么检查出这些无用代码呢？</strong></p><p>通过 ObjC 的 runtime 源码，我们可以找到怎么判断一个类是否初始化过的函数，如下：</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_INITIALIZED (1&lt;&lt;29)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">bool isInitialized() {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">   return getMeta()-&gt;data()-&gt;flags &amp; RW_INITIALIZED;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>isInitialized 的结果会保存到元类的 class_rw_t 结构体的 flags 信息里，flags 的 1&lt;&lt;29 位记录的就是这个类是否初始化了的信息。而 flags 的其他位记录的信息，你可以参看 objc runtime 的源码，如下：</p><pre style="position: relative;"><code><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// 类的方法列表已修复</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_METHODIZED         (1&lt;&lt;30)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// 类已经初始化了</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_INITIALIZED        (1&lt;&lt;29)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// 类在初始化过程中</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_INITIALIZING       (1&lt;&lt;28)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// class_rw_t-&gt;ro 是 class_ro_t 的堆副本</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_COPIED_RO          (1&lt;&lt;27)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// 类分配了内存，但没有注册</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_CONSTRUCTING       (1&lt;&lt;26)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// 类分配了内存也注册了</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_CONSTRUCTED        (1&lt;&lt;25)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// GC：class 有不安全的 finalize 方法</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_FINALIZE_ON_MAIN_THREAD (1&lt;&lt;24)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">// 类的 +load 被调用了</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">#define RW_LOADED             (1&lt;&lt;23)</div></td></tr></tbody></table></code><div class="richcontent-pre-copy"><span class="iconfont"></span>复制代码</div></pre><p>flags 采用位方式记录布尔值的方式，易于扩展、所用存储空间小、检索性能也好。所以，经常阅读优秀代码，特别有助于提高我们自己的代码质量。</p><p>这里，我插一句题外话。<strong>我面试应聘者的时候，常常会问他们“苹果公司为什么要设计元类”这样的开放问题。</strong>结果呢，就是我所见的大部分应聘者，都只能说出元类是什么。</p><p>因为很多人都只是奔着学习 runtime 这个知识点而学习，并没有在学习过程中多想想为什么。比如，为什么类结构要这么设计，为什么一个类要设计两个结构体等等类似的问题。在我看来，没有经过深入思考的学习是不够的，是学不到精髓的，很多优秀的代码可能就会被错过。</p><p>好了，现在继续回到我们的正文内容中。既然能够在运行中看到类是否初始化了，那么我们就能够找出有哪些类是没有初始化的，即找到在真实环境中没有用到的类并清理掉。</p><p>具体编写运行时无用类检查工具时，我们可以在线下测试环节去检查所有类，先查出哪些类没有初始化，然后上线后针对那些没有初始化的类进行多版本监测观察，看看哪些是在主流程外个别情况下会用到的，判断合理性后进行二次确认，最终得到真正没有用到的类并删掉。</p><h2>小结</h2><p>今天这篇文章，我主要和你分享的是 App 安装包的一些瘦身方案。</p><p>在我看来，可以把包瘦身方案根据 App 的代码量等因素，划分为两种。</p><p>对于上线时间不长的新 App 和那些代码量不大的 App 来说，做些资源上的优化，再结合使用 AppCode 就能够有很好的收益。而且把这些流程加入工作流后，日常工作量也不会太大。</p><p>但是，对于代码量大，而且业务需求迭代时间很长的 App 来说，包大小的瘦身之路依然任道重远，这个领域的研究还有待继续完善。LinkMap 加 Mach-O 取差集的结果也只能作为参考，每次人工确认的成本是非常大的，只适合突击和应急清理时使用。最后日常采用的方案，可能还是用运行时检查类的方式，这种大粒度检查的方式精度虽然不高，但是人工工作量会小很多。</p><h2>课后小作业</h2><p>今天我提到了运行时检查类是否被使用的方案，那么你来写个使用这种方案的小工具来检查下你的 App 里有哪些类实际上是没有被初始化用到的吧。</p><p>感谢你的收听，欢迎你在评论区给我留言分享你的观点，也欢迎把它分享给更多的朋友一起阅读。</p><p><img src="https://static001.geekbang.org/resource/image/f5/27/f5ee90aa0183a4bcc688980bd625eb27.jpg" alt=""></p></div></div> <!----> <div class="_22WJb59B_0"><span class="_3ODTLCec_0">©</span>&nbsp;版权归极客邦科技所有，未经许可不得传播售卖。 页面已增加防盗追踪，如有侵权极客邦将依法追究其法律责任。
        </div></div> <div class="_2DmyW7ex_0 _2QmGFWqF_0"><div class="_1M5b-cvc_0"><div class="_3l55W_ak_0">上一篇</div> <div class="_3Ov-zF0e_0">09 | 无侵入的埋点方案如何实现？</div></div> <div class="_1M5b-cvc_0"><div class="_3l55W_ak_0">下一篇</div> <div class="_3Ov-zF0e_0">11 | 热点问题答疑（一）：基础模块问题答疑</div></div></div> <div class="_1qhD3bdE_0 _2QmGFWqF_0"><div class="iconfont _2-nZIZjB_0"> 写留言</div> <h2><span>精选留言</span><span class="_2FC_cD1O_0">(30)</span></h2> <ul><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/16/34/e9/238acb66.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>元元</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-02</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">19</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">老师ios为什么要设计元类？能讲一下吗</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <div class="_2xNIY4NG_0"><p class="_33BLbmw4_0">作者回复: 其实这个问题是个开放性的问题。<br>不同阶段的解读也会不一样。因为这个知识点大家都会去学，主要是希望能够通过面试者的回答，加上追问方式来看他是不是会带着思考去学习。比如元类和类的结构体非常类似，他有没有想过为什么不合在一起用一个结构体？（结构体设计能力）元类和类创建的时机是不是一样的，为什么？（用过 runtime 接口开发没）元类的 flag 字段里记录了什么？（是否有深入探究的意识）</p></div></div></li><li class="reJj6Thl_0"><img src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QOBaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk2MkUzQjA0QURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk2MkUzQjAzQURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Yzc5YTE0Y2UtYjA1Yy00NjkzLWEyZWYtOTFmOGJjNzQxNzY5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmFhN2JmYTAyLTMwYTAtNDA4Ny04NzJmLThjMDIzMTYzYWVkYyIvPiA8L3JkZjpEZXNjcmlwdGlv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" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>Geek_97bcf...</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-03</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">15</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">元类和类的数据结构是同一个，只是运行时使用的字段不一样。<br><br>实例方法调用是通过objc_msgSend来调用，它的第一个入参就是实例对象，其流程是查找实例对象的isa指针，找到类对象，然后找到method_t的IMP，bl直接跳转调用。<br><br>类方法的调用和实例方法调用一致，它的第一个入参对象是类对象，类对象的isa指向的是元类。<br><br>所以，没有元类的话，类方法是没有办法调用的。objc_msgSend的调用流程是一定要isa指针的。<br><br>如果实例方法和类方法都放在类对象上，那类对象的isa指针只能指向自己了，那一旦类方法和实例方法重名，就没法搞了！<br><br>所以，问这个问题的，都是objc_msgSend源码没看过的同学。</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/12/ea/dc/e813af86.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>codertian...</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-02</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">2</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">我也不懂啥叫元类</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/11/68/ff/1832c048.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>leoliu</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-04</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">1</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">本地的同一图片的2倍和3倍图被转换成相应的webp后，这样苹果就无法根据设备选择了相应的图片了，对瘦身的影响哪个比重会大一下</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/16/2f/5e/e1306e14.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>邓斌</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-04</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">1</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">元类的存在让类本身也相当于一个返利对象，也就是类方法存在的原理。毕竟万物皆对象不是白说的。<br>一种好的设计思想衍生出好的一种使用方法，元类的思路就很典型</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QOBaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk2MkUzQjA0QURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk2MkUzQjAzQURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Yzc5YTE0Y2UtYjA1Yy00NjkzLWEyZWYtOTFmOGJjNzQxNzY5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmFhN2JmYTAyLTMwYTAtNDA4Ny04NzJmLThjMDIzMTYzYWVkYyIvPiA8L3JkZjpEZXNjcmlwdGlv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" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>Norman</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-03</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">1</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">老师好，有个问题。我使用imageOptim压缩图片之前的xcassets大小是8.7M，压缩之后是6.4M，但是打包出来的ipa大小并没有明显改变，请问这是为什么呢。</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/10/49/ba/23c9246a.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>mαnajay</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-02</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">1</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">我觉得设计元类 ，主要思想是 处理代码 通用逻辑与 特有逻辑。有些作为模板可以复用代码逻辑甚至节省内存空间分配，有些则是要针对独立个体单独处理，就是常说的面向对象编程中处处皆对象</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/13/66/57/f76f20b6.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>小前端</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-02</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class="">1</span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">课后作业的官方答案啥时候同步？谢谢</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/16/39/e3/66901f8a.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>chdo</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-09</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">老师， 我将动态库都换成静态库打包后，IPA的包大小反而比之前的更大，包在66M左右，增大了2M多，和您文章中关于静态库换动态库体积会变大这点不一样。<br>想请问。不知道是我理解错误还是有其他什么点需要注意吗？<br>另外，为什么，代码转为动态库和静态库的包大小是不一样的呢？</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/12/d0/cf/de533406.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>毒手疯波</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-09</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">framework中的i386和x86_64会打包进release app里么？</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QOBaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk2MkUzQjA0QURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk2MkUzQjAzQURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Yzc5YTE0Y2UtYjA1Yy00NjkzLWEyZWYtOTFmOGJjNzQxNzY5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmFhN2JmYTAyLTMwYTAtNDA4Ny04NzJmLThjMDIzMTYzYWVkYyIvPiA8L3JkZjpEZXNjcmlwdGlv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" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>drunkenMou...</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-07</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">App Thinning原理：每个App包会包含多个芯片（如真机、模拟器）的指令集架构文件，App Thinning会使用户只下载一个适合自己设备的芯片指令架构文件。<br><br>简单说，使用App Thinning之后苹果会自动帮你把App包按照型号分割成不同变体，保证每个型号只下载自己所需要的资源。而自己所需要做的，就是通过Asset Catalog模板创建xcassets目录，将2x与3x图片放进去。<br><br>无用文件删除简单说：通过find命令与正则表达式找到所有代码中在使用的文件， 那么剩下的就是没有用的文件。关于没用文件的删除和有用文件的寻找，可以借助工具LSUnusedResources<br><br>objc_msgSend通过_objc_selrefs获取selector， __objc_classrefs获取被调用的类，__objc_supperrefs获取调用的父类<br><br>若有部分方法是运行时动态调用就会没执行到则没法收集。比如A类的B方法没有被我直接调用，但是在运行到某一代码块时，我通过runtime的objc_msgSend手动调用了这个方法，则不会被记录。<br><br>元类：每个类都是元类，通过元类调用类方法。通过元类创建实例对象，用实例对象来调用实例方法。可以防止类方法与实例方法重名时，声明和调用失败。而实例对象的isa指针指向的是元类，也就是之前说的：每个对象都会指向一个类，每个类都有一个方法列表，方法列表里的每个方法都是由SEL、IMP和metadata组成。元类的isa指针，指向父类的元类，而根类就是NSObject。<br><br>所以，为什么要设计元类？为了区分实例方法和类方法的声明与调用。但是方法列表保存在元类里，通过元类来找到父类。<br><br>最后问句：有人作业可以借我参考一下吗？？</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTOicFdCW2hgUwgfiaR9qSGabPvgLorp1Xcd7uLquXibWmKZxJibMsSeqibEpuHoSwusj2kOr86uLAzng/132" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>Geek_45fc0...</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-06</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">webp作为非官方的图片格式，实用上不够方便，而且不兼容App thinning，看来只能等iOS13，让苹果把图片格式原生兼容HEIC，压缩比又大，解码效率又高！</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/12/52/01/a8d3db35.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>Vicky</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-04</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">@Normal, imageoptim里有个解释，不知道是不是你包变大的原因 可以参考一下<br>https://imageoptim.com/xcode.html</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/11/68/ff/1832c048.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>leoliu</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-04</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">本地的@2x和@3x转成webp以后，调用的时候是否要判断设备分辨率，根据不同的设备分辨率调用不同倍数的webp</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI34ZlT6HSOtMvxyyds7fNup6XWUU9NdgpGvrXmT7YkhL61HTZGmKtleSianjKVicxjTj5MrXmcc4Jg/132" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>cc</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-04</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">老师，请问下我们通过Xcode archive 出来的不同机型的变体包（17M左右）跟AppStore上显示的包大小(38M左右)，为什么相差了一倍多。<br>我查了下，由于app提交至App Store 时会进行加密压缩等处理，在App Store上的二进制文件会比实际上传的二进制文件要大。<br><br>但对于相差一倍多这个还是有点过大，请问下老师还有其他解释原因吗</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QOBaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWE3YmZhMDItMzBhMC00MDg3LTg3MmYtOGMwMjMxNjNhZWRjIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk2MkUzQjA0QURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk2MkUzQjAzQURCODExRThBRTUyQzg5RkRENTk1MzAzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Yzc5YTE0Y2UtYjA1Yy00NjkzLWEyZWYtOTFmOGJjNzQxNzY5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmFhN2JmYTAyLTMwYTAtNDA4Ny04NzJmLThjMDIzMTYzYWVkYyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAgEBAgICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//AABEIAO4A7gMBEQACEQEDEQH/xACGAAEAAgIDAQEBAAAAAAAAAAAABwgBBgIDBQQJCgEBAAAAAAAAAAAAAAAAAAAAABAAAgIBAwIDBAYECgkFAAAAAAECAwQRBQYhEjFBB1FhIhNxgTIUFgiRQnIjUmKC0jNjJBWVVqGx0ZLCQ1Nzk9NEdCUXEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADKTbSSbbeiS6tt+CS82wPXp49v+TFSx9j3jIi+qlTtmbbF/Q4USTA4ZGxb3iRc8rZt1xoLxlkbfl0xX0yspikB5QAAAAAAAAAAAAAAAAAAAAAAAAAAAAHfjY2RmX1YuJRbk5N81XTRTCVltk34RhCCcpMCcuNejrnCvL5Pkyq1SktswrI98df1cvL0lFP2xq1/b8gJj2vYdj2SEYbVteJidq7fm11ReRJaafvMqzvybX+1Jgev3v2IB3v2IDwd14xx3fYyW57TiXWTT/tMa1TlJvzjl0fLyF166OWntAg3mPpNn7ZjX7jxdX7zVUlZLaZuuO5KvuXzHi2/u6cxwhq1DSFktFFdzYEJY+ZRkuyEHKF1M5V5GNdCVOTj2wk4TrvosUbK5wmmnqvFAfUAAAAAAAAAAAAAAAAAAAAAAAAfZt+Bl7pmY+34FE8jLyrFVTVDxlJ6ttt6RhCEU5Sk9FGKbfRAWx4ZwjA4liRskq8reL60svOcde3XRyxsTuWtWNF+L6Ssa1l5RiG6Nt+IGAAAABlSa/2AQz6pelGNy+izfePqG3cvxYd8LqmseveIVx0WLmyXbFZPatKrn7oT1ho4BUPG5FkYWRbt2+41mPlYt1mNkSdTrtpuqm4WV5WPonGdc4tPtXivs+YG203VZFcbaLIW1y6xnXJSi/dqvNea8UB2AAAAAAAAAAAAAAAAAAAAAAWd9LeIw2bbI77m1L+890qUqFNfFibfPSdUIp9Y25einJ+Kj2rppLUJUbberAwAAAAAADKbTAq7+YT08rvxvx5tFCWRjqqjkNVUf6fGfbTjbm4x8bcZ9tVr661uMnooSbCpuFuGXt9nzMW6UNWu+H2qrEvKdb+GXTz8V5NAb5tvJ8TL7asvtxL3ou5v+zzf8Wb61v3S6e9gbOnr1XVPqmvMAAAAAAAAAAAAAAAAAAANu4NsH4i5JgYNkO/Eqk83PX6v3PGcZTrl7sixxq93eBcSWi0jFJRikkl0S06JJLokkBxAAAAAAAAAdWTi42fiZWBmVQyMTNx7sXJosWsLqL65VXVSXi42VzaYH5k8w47fxPk288fv7m9tzbKqbJLR34diV2DkPwSeRh2wm15N6Aa0B7W277nbdpCMvn46/8Ab2tuMV/VT6yqf0fD7gN/27esHcko1T+Xfp1x7dI2e/sf2bV9HXTxSA9cAAAAAAAAAAAAAAAAAsN6K7Yq8LeN5nH478ivb6ZNdVXj1xyL+32xsnfBP3wAmoAAAAAAAAAAyno0wKd/mZ2OOPvfH+QVQ0W54GRt2S4ro79tthbTOb8520Zvav4tXuArEAAym0002mmmmno011TTXVNMDadt5Rk43bVmqWVStErNV94gv2norv5Wj94G94mdi51fzcW6Nsencl0nBvysg9JQf0rr5AfWAAAAAAAAAAAAAABbf0yxljcI2ppaSyXm5M/e7M6+EH/4a4gbyAAAAAAAAAAAID/MhhRyOCYGWkvmYHIMKfd5qnIw87Hsj7lK2db/AJIFGwAAAB3UZF+LZG7HtnTZHwnB6P3p+UovzT1TA3bbeVwn21blHsl4LJri3B++2tauH0x1XuQG412V3QjZVOFlc1rGcJKUZL2qUW0wOYAAAAAAAAAAAAXG4Hp+DNg08PuMf0/Os1/0gbUAAAAAAAAAAAIZ9f8At/8AzTO18f7y2rt/a++L/h1AoKAAAAAAD78Hc8zbp92Na4xb1nVL4qbP2oN6a6ea0fvA37bOSYeb21X6YmQ+nbOX7mb/AKu16JN+yWj8lqBsYAAAAAAAAAAAtr6Y5SyeE7XFPWeLPNxbPPRwzbrYL3aU2xA3sAAAAAAAAAAAQD+ZHOjj8G27DUv3mfyDEXbr40YuFnXWS9/bb8tfWBR0AAAAAAAAB6UN2zo4duD8+Use2MYpSbcqlGcZ6VT1Uoxl26NdY6N9AJeAAAAAAAAAALB+iu6KeNvOyzl8Vdte5UR16uF0I4uS17FXKqr65gTaAAAAAAAAAAZS1aQFN/zL77HK3/YuP1TUo7Tt92dkqL6Ryd0shGFc1/DrxsKMl7Fb7wKzAAAAAAAAAAE4AAAAAAAAAAG1cK378OcjwNxnJrFc3i56Wr1w8nSFsml1l8iXbYl5uCAuQ3GSjZCUZQnFSjKLUoyTWqlGS6OMk9U/MDiAAAAAAAAA+fMzcXa8HM3POtjRh4GNfl5N0/s1UY9crbZv26Qi9Eur8APzI5XyDI5TyPeOQZKlGzc822+Fcn3OjGWlWJja9dVjYtcK0/PtA14AAAAAAAAAAnAAAAAAAAAAAAWW9KuXw3Pb48dz7V/eG3V6YMpvSWXgVr4YRb+1dhR+HTxdWj69smBLbTT0YGAAAAAAAZSbYFUvzCeotbh+AtnvUn3VX8jvqlqo9jjbi7SpJ9Zd6jbd7NIR1+2kFSwAAAAAAAAAABOAAAAAAAAAAAA+nDzMnb8qjNw7p4+VjWxuourekq7IPVNeKafg09U10aaYFrOE88weV48MXJlXib5TD9/it9sMlRXxZOF3PWcGlrKHWVfvWkmG+OLXj+nyAwAAAAOSi39HtAgb1Z9ZMPiVGTx/jl1eXyeyEqr74dtuPsanHSVlz6wt3JJ/BV1UH8VnRKEwo1ddbkW25F9tl199k7brrZystttsk52WWWTblOyc222222wOsAAAAAAAAAAATgAAAAAAAAAAAAHZVbbRbXdRZZTdVONlVtU5V2Vzi9YzhODUoSi1qmnqgJq4z6wZWLGvE5JjzzqopQW44qhHMjFdE8iiThTk6ecouEtPFSYEx7ZyzjG8QUsDecKU5afuLbli5Cb8njZPyrn1emqTWvmBsXZqk009f0ae1NagHFRTlKSikm234JJattvRJJAaHyD1O4HxmFj3HkODdkwT/sO32x3LNc1/y5Y+G7fkSl5O1wj7wKxc6/MHve+13bdxWi3j222KVc86U4y3rIrfTSFlTdO2qSfX5TnYvKxdUBXaUpTlKUpOUpNylKTblKTerlJvVttvqwMAAAAAAAAAAAABOAAAAAAAAAAAAAAAHCyuu2Eq7YQsrmtJQnFShJexxaaYGv5O2bpiwb2Hd9xwIrV/c6s/Kop9rVUq7Y9mvslqtfNAaPuObvVk5Ubrm7ldOPjXm5WTd9DSusnGUX5NapgeUAAAAAAAAAAAAAAAAnAAAAAAAAAAA27ZODcn39QswttsrxZ6NZuY/umK4v8AXhO3Sd8f+3GYEn7b6KVxUZ7zvj10XfTttMYJe3ty8vu7l9NKA3HF9MuD4iXzMG7Omv18rNypN/TDGnj0P/dA9mviPDKlpHj22NL/AKmJC5/pu72wO38M8Q/y1s/+F4X8wB+GeIf5a2f/AAvC/mAdF/EOEZKisjiew3qL1irdn2+ztb8XHuqemoHzfgT09/yVxv8AwPbf/RA+e7049N79VPh+xxT86cCvH/Q8f5bX1Aa1uHoZ6X7gn8rasna7Ja62bfuefBpvzVeZbmY0dPdDQCN97/LJTJTs41yeafX5eLvWNGyL9nduGAoOP1YzAgrk/pZzjiUbLt02S+3Br1cty21rcMFQXjZbZQnbi1++6FYEegAAAAAAAAAE4AAAAAAAAbXxnhu98pu0wKPlYcJ9t+45HdDEp85RjLRyvuS/Ugm1qtdF1AsPx70741xtQutpW7blFJvKza4TjCa6642I+6nHSa1TffYv4QG7TyZvpHSC93j+kDobberbb9rerAwAAAAAAAAAym09U2n7U9GB3wyZrpLSa9/j+kCLOZejfDOZxtyaMeOwb1NSktw2ymuuFtj692dt6cMbLTk9ZSj8u1vxn5AU55x6bcn4Hkdu7Yqv262xwxN4w+63b8hvVxhObip4uQ4r+jsUZPR9vclqBoAAAAAAAAE4AAAAAAAl/gfppbvKq3ffo2Y20vSzGxNZVZG4x8VOb6Tow5eTWk7F9nRaSYWFrWPh0VYeBTVjY1EFXVXTCNddcF4RrhFKMV/rA6wAAAAAAAAAAAAAAAGcirE3HFv2/c8ajNwsquVWRRk1Quptrl4wtqnGUZx+ro+oFOPVf0Sv41HI5FxSFuZx+PddmbfrK/L2eHjK2uTcrMvboecnrZVHrPuinNBXUAAAAAAE4AAAAABMfprwGO7ShyDeqf8A6qmbeFi2r4dwtrk07rU/tYVM1pp4WTWj+FNSCwltvfpCC7a49El0108Onkl5IDoAAAAAAAAAAAAAAAAAAHdVaopwmlKqSalFrVaPo+j6NNeKApz62eksOPTt5bxrH02LJtT3PApj8G0ZF0tI5GPGP2dtyLJadvhTY0l8EoqIVvAAAAACcAAAABunBeKWcr3mGPYpx23E7Mjcro6rSnu0hjQl5XZUouK81FSl17dALZNVUVVYeLXCnHx64VV11JRrhXXFRhVCMdFGEIpJIDpAAAAAAAAAAAAAAAAAAAABzdePl49+Bm015GJl1WY99F0VZVbTdB1202QknGVdkJNNPp1A/Pj1U4DdwHktuJVGyey7gp5myZE9ZN4/clbh2Tf2sjAnJQl5yg4TendogjMAAAATgAAAZScmoxTlKTSjFJttt6JJLq22BcDhnHo8V47jYsoRW4ZSWVuE/GX3q2K/da+cMSvSC8m035sD3wAAAAAAAAAAAAAAAAAAAAAAGlepvDoc74dm4FdcZbvgqW4bPZolP79j1yax+56aV59XdVLr2qUlJ/ZQH5yyjKEpRlFxlFuMoyTUoyT0cZJ6NNNdUBgAAAnAAAAkT0x2NbzynGsuh34m1Qe5Xpr4ZWUyjHErfk28mUZaPxjBgWivn32P2R+FfV4v62B0gAAAAAAAAAAAAAAAAAAAAAAO6ifZYvZL4X9fg/qYFC/XHiseNc7zbsetV7fv8FvWKorSELsic4bhStPhTjmwnNRWijCyKAh0AAAnAAAAst6PbasPjuduso6W7lmShXLT7WNgxdVfX/5Nluv0ASUAAAAAAAAAAAAAAAAAAAAAAAAAIJ/Mfsi3Dh+179CGt+yblGu2en2cLdIrHu1a8vvtOOlr06gUlAAAJwAAALk8UxFt/D+P4yWjlt2LfNeGlmXD77an71bcwPXAAAAAAAAAAAAAAAAAAAAAAAAAGreoe3Ld/Tzl2E4qTWzZuVXF9dbtugtyoS97vxo6e8D82AAACcAAAC8VKrW3bcqX3UrFx1VJJqMq1RX8tpNJrWHh0A4gAAAAAAAAAAAAAAAAAAAAAAAADrzVTLZ93jkSUMd7fmK+ck3GFLxbVbJpJtqMNW+gH5ZgAAH/2Q==" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>Norman</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-03</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">“而实际情况是，业务复杂的 App 轻轻松松就超过了 60MB。虽然我们可以通过静态库转动态库的方式来快速避免这个限制，但是静态库转动态库后，动态库的大小差不多会增加一倍，这样 150MB 的限制就更难守住。”这几句我没有很明白，老师可以给解释一下吗？</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epVhRFBLPOic3kUju3dkpmwEeI1aBxy7WSGtq5smkicKz4bTbicsSElekSjnBhCQvibncVOHBHeY6pnuA/132" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>hopestar90</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-03</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">戴铭老师，仔细去看了下源码，其实没有特别想明白类要设计成两个结构体，是因为本身类也是对象，然后需要存储一些实例共有的信息吗？想听戴老师详细说说这里</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/de/d6/abb7bfe3.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>易若风云</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-03</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">一切皆对象，类描述了实例，元类描述了类，谁来描述元类呢？感觉都是设计上的哲学</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/11/70/4f/240696ec.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>Taylor</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-03</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">swift代码怎么检查呢？ 用了一些工具都不是非常准确。非常希望Xcode自身能提供这样的功能。</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li><li class="reJj6Thl_0"><img src="https://static001.geekbang.org/account/avatar/00/16/2f/25/2d2cc1c5.jpg" class="_2273kGdT_0"> <div class="_2CG0SquK_0"><div class="_304R4gla_0"><div><div class="_18Dng5rT_0"><span>skywalker</span> <!----></div> <div class="_1H1Z49Dr_0">2019-04-02</div></div> <div class="_2eMTs2JE_0"><div class="_2P4B1Hdm_0"><i class="iconfont"></i> <span class=""></span></div> <!----> <!----></div></div> <div class="_3M6kV3zb_0">元类那边我之前就只了解到isa指针找父类的作用，flag什么的都没了解到过。😢然后刚刚看了点学习视频，发现用位域来存储信息的想法实在是太厉害了，我的天。</div> <div class="_2r3UB1GX_0"><span>展开</span><i class="iconfont"></i></div> <!----></div></li></ul></div></div> <!----></div> <!----></div></div> <div class="_2sRsF5RP_0"></div></div>



